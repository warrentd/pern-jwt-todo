(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(16),a=n.n(r),s=(n(26),n(7)),o=n(3),i=n.n(o),l=n(6),u=n(5),d=(n(28),n(12)),j=n(2),b=n(11),h=(n(29),n(1)),m=function(e){var t=e.setTodosChange,n=Object(c.useState)(""),r=Object(u.a)(n,2),a=r[0],s=r[1],o=function(){var e=Object(l.a)(i.a.mark((function e(n){var c,r,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,(c=new Headers).append("Content-Type","application/json"),c.append("token",localStorage.token),r={description:a},e.next=8,fetch("/dashboard/todos",{method:"POST",headers:c,body:JSON.stringify(r)});case 8:return o=e.sent,e.next=11,o.json();case 11:l=e.sent,console.log(l),t(!0),s(""),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(c.Fragment,{children:[Object(h.jsx)("h1",{className:"text-center mt-5",children:"Pern Todo List"}),Object(h.jsxs)("form",{className:"d-flex mt-5",onSubmit:o,children:[Object(h.jsx)("input",{type:"text",className:"form-control",value:a,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("button",{className:"btn btn-success",children:"Add"})]})]})},p=function(e){var t=e.todo,n=e.setTodosChange,r=Object(c.useState)(t.description),a=Object(u.a)(r,2),s=a[0],o=a[1],d=function(){var e=Object(l.a)(i.a.mark((function e(c){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,r={description:s},(a=new Headers).append("Content-Type","application/json"),a.append("token",localStorage.token),e.next=8,fetch("/dashboard/todos/".concat(t.todo_id),{method:"PUT",headers:a,body:JSON.stringify(r)});case 8:n(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(c.Fragment,{children:[Object(h.jsx)("button",{type:"button",className:"btn btn-warning","data-toggle":"modal","data-target":"#id".concat(t.todo_id),children:"Edit"}),Object(h.jsx)("div",{className:"modal",id:"id".concat(t.todo_id),onClick:function(){return o(t.description)},children:Object(h.jsx)("div",{className:"modal-dialog",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsxs)("div",{className:"modal-header",children:[Object(h.jsx)("h4",{className:"modal-title",children:"Edit Todo"}),Object(h.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",onClick:function(){return o(t.description)},children:"\xd7"})]}),Object(h.jsx)("div",{className:"modal-body",children:Object(h.jsx)("input",{type:"text",className:"form-control",value:s,onChange:function(e){return o(e.target.value)}})}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("button",{type:"button",className:"btn btn-warning","data-dismiss":"modal",onClick:function(e){return d(e)},children:"Edit"}),Object(h.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return o(t.description)},children:"Close"})]})]})})})]})},O=function(e){var t=e.allTodos,n=e.setTodosChange,r=Object(c.useState)([]),a=Object(u.a)(r,2),s=a[0],o=a[1],d=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/todos/".concat(t),{method:"DELETE",headers:{token:localStorage.token}});case 3:o(s.filter((function(e){return e.todo_id!==t}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){o(t)}),[t]),console.log(s),Object(h.jsxs)(c.Fragment,{children:[" ",Object(h.jsxs)("table",{className:"table mt-5 text-center",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Description"}),Object(h.jsx)("th",{children:"Edit"}),Object(h.jsx)("th",{children:"Delete"})]})}),Object(h.jsx)("tbody",{children:0!==s.length&&null!==s[0].todo_id&&s.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.description}),Object(h.jsx)("td",{children:Object(h.jsx)(p,{todo:e,setTodosChange:n})}),Object(h.jsx)("td",{children:Object(h.jsx)("button",{className:"btn btn-danger",onClick:function(){return d(e.todo_id)},children:"Delete"})})]},e.todo_id)}))})]})]})},x=function(e){var t=e.setAuth,n=Object(c.useState)(""),r=Object(u.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)([]),d=Object(u.a)(o,2),j=d[0],p=d[1],x=Object(c.useState)(!1),f=Object(u.a)(x,2),g=f[0],v=f[1],y=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,p(n),s(n[0].user_name),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){y(),v(!1)}),[g]),Object(h.jsxs)(c.Fragment,{children:[Object(h.jsxs)("div",{className:"d-flex mt-5 justify-content-around",children:[Object(h.jsxs)("h2",{children:[a,"'s Todo List"]}),Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),b.b.success("Logout Successful")}(e)},children:"Logout"})]}),Object(h.jsx)(m,{setTodosChange:v}),Object(h.jsx)(O,{allTodos:j,setTodosChange:v})]})},f=n(14),g=function(e){var t=e.setAuth,n=Object(c.useState)({email:"",password:""}),r=Object(u.a)(n,2),a=r[0],o=r[1],j=a.email,m=a.password,p=function(e){o(Object(s.a)(Object(s.a)({},a),{},Object(f.a)({},e.target.name,e.target.value)))},O=function(){var e=Object(l.a)(i.a.mark((function e(n){var c,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,c={email:j,password:m},e.next=5,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 5:return r=e.sent,e.next=8,r.json();case 8:(a=e.sent).token?(localStorage.setItem("token",a.token),t(!0),b.b.success("Logged In Successfully")):(t(!1),b.b.error(a)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(c.Fragment,{children:[Object(h.jsx)("h1",{className:"text-center my-5",children:"Login"}),Object(h.jsxs)("form",{onSubmit:O,children:[Object(h.jsx)("input",{type:"email",name:"email",placeholder:"email",className:"form-control my-3",value:j,onChange:function(e){return p(e)}}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"password",className:"form-control my-3",value:m,onChange:function(e){return p(e)}}),Object(h.jsx)("button",{className:"btn btn-success btn-block",children:"Submit"})]}),Object(h.jsx)(d.b,{to:"/register",children:"Register"})]})},v=function(e){var t=e.setAuth,n=Object(c.useState)({email:"",password:"",name:""}),r=Object(u.a)(n,2),a=r[0],o=r[1],j=a.email,m=a.password,p=a.name,O=function(e){o(Object(s.a)(Object(s.a)({},a),{},Object(f.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(l.a)(i.a.mark((function e(n){var c,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,c={email:j,password:m,name:p},e.next=5,fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 5:return r=e.sent,e.next=8,r.json();case 8:(a=e.sent).token?(localStorage.setItem("token",a.token),t(!0),b.b.success("Registered Successfully")):(t(!1),b.b.error(a)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(c.Fragment,{children:[Object(h.jsx)("h1",{className:"text-center my-5",children:"Register"}),Object(h.jsxs)("form",{onSubmit:x,children:[Object(h.jsx)("input",{type:"email",name:"email",placeholder:"email",className:"form-control my-3",value:j,onChange:function(e){return O(e)}}),Object(h.jsx)("input",{type:"password",name:"password",placeholder:"password",className:"form-control my-3",value:m,onChange:function(e){return O(e)}}),Object(h.jsx)("input",{type:"text",name:"name",placeholder:"name",className:"form-control my-3",value:p,onChange:function(e){return O(e)}}),Object(h.jsx)("button",{className:"btn btn-success btn-block",children:"Submit"})]}),Object(h.jsx)(d.b,{to:"/login",children:"Login"})]})},y=function(){return Object(h.jsxs)("div",{className:"jumbotron mt-5",children:[Object(h.jsx)("h1",{children:"Welcome to my application"}),Object(h.jsx)("p",{children:"Sign In and start building your todo list."}),Object(h.jsx)(d.b,{to:"/login",className:"btn btn-primary ml-3",children:"Login"}),Object(h.jsx)(d.b,{to:"/register",className:"btn btn-primary ml-3",children:"Register"})]})};var k=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],a=function(e){r(e)},o=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/is-verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r(!0===n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){o()})),Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(c.Fragment,{children:[Object(h.jsx)(d.a,{children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)(j.d,{children:[Object(h.jsx)(j.b,{exact:!0,path:"/",render:function(e){return n?Object(h.jsx)(j.a,{to:"/dashboard"}):Object(h.jsx)(y,Object(s.a)({},e))}}),Object(h.jsx)(j.b,{exact:!0,path:"/login",render:function(e){return n?Object(h.jsx)(j.a,{to:"/dashboard"}):Object(h.jsx)(g,Object(s.a)(Object(s.a)({},e),{},{setAuth:a}))}}),Object(h.jsx)(j.b,{exact:!0,path:"/register",render:function(e){return n?Object(h.jsx)(j.a,{to:"/login"}):Object(h.jsx)(v,Object(s.a)(Object(s.a)({},e),{},{setAuth:a}))}}),Object(h.jsx)(j.b,{exact:!0,path:"/dashboard",render:function(e){return n?Object(h.jsx)(x,Object(s.a)(Object(s.a)({},e),{},{setAuth:a})):Object(h.jsx)(j.a,{to:"/login"})}})]})})}),Object(h.jsx)(b.a,{})]})})};a.a.render(Object(h.jsx)(k,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.573a5afd.chunk.js.map
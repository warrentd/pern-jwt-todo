{"ast":null,"code":"import _regeneratorRuntime from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState}from'react';import{Link}from'react-router-dom';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setAuth=_ref.setAuth;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var email=inputs.email,password=inputs.password;var _onChange=function onChange(e){setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmitForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var body,response,parseResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;body={email:email,password:password};_context.next=5;return fetch('/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});case 5:response=_context.sent;_context.next=8;return response.json();case 8:parseResponse=_context.sent;if(parseResponse.token){localStorage.setItem('token',parseResponse.token);setAuth(true);toast.success('Logged In Successfully');}else{setAuth(false);toast.error(parseResponse);}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function onSubmitForm(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center my-5\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitForm,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"email\",className:\"form-control my-3\",value:email,onChange:function onChange(e){return _onChange(e);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"password\",className:\"form-control my-3\",value:password,onChange:function onChange(e){return _onChange(e);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-block\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register\"})]});};export default Login;","map":{"version":3,"sources":["/Users/trwarren/Projects/pern-jwt-todo/client/src/components/Login.js"],"names":["React","Fragment","useState","Link","toast","Login","setAuth","email","password","inputs","setInputs","onChange","e","target","name","value","onSubmitForm","preventDefault","body","fetch","method","headers","JSON","stringify","response","json","parseResponse","token","localStorage","setItem","success","error","console","message"],"mappings":"kzBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,KAA0C,OAA1C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,KAAT,KAAsB,gBAAtB,C,wFAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CAC3B,cAA4BJ,QAAQ,CAAC,CACjCK,KAAK,CAAE,EAD0B,CAEjCC,QAAQ,CAAE,EAFuB,CAAD,CAApC,wCAAOC,MAAP,eAAeC,SAAf,eAKA,GAAQH,CAAAA,KAAR,CAA4BE,MAA5B,CAAQF,KAAR,CAAeC,QAAf,CAA4BC,MAA5B,CAAeD,QAAf,CAEA,GAAMG,CAAAA,SAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,CACpBF,SAAS,gCAAMD,MAAN,wBAAeG,CAAC,CAACC,MAAF,CAASC,IAAxB,CAAgCF,CAAC,CAACC,MAAF,CAASE,KAAzC,GAAT,CACH,CAFD,CAIA,GAAMC,CAAAA,YAAY,2FAAG,iBAAOJ,CAAP,kJACjBA,CAAC,CAACK,cAAF,GADiB,gBAIPC,IAJO,CAIA,CAAEX,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAJA,uBAKUW,CAAAA,KAAK,CAAC,aAAD,CAAgB,CACxCC,MAAM,CAAE,MADgC,CAExCC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAF+B,CAGxCH,IAAI,CAAEI,IAAI,CAACC,SAAL,CAAeL,IAAf,CAHkC,CAAhB,CALf,QAKPM,QALO,qCAWeA,CAAAA,QAAQ,CAACC,IAAT,EAXf,QAWPC,aAXO,eAab,GAAIA,aAAa,CAACC,KAAlB,CAAyB,CACrBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BH,aAAa,CAACC,KAA5C,EAEArB,OAAO,CAAC,IAAD,CAAP,CACAF,KAAK,CAAC0B,OAAN,CAAc,wBAAd,EACH,CALD,IAKO,CACHxB,OAAO,CAAC,KAAD,CAAP,CACAF,KAAK,CAAC2B,KAAN,CAAYL,aAAZ,EACH,CArBY,iFAwBbM,OAAO,CAACD,KAAR,CAAc,YAAIE,OAAlB,EAxBa,qEAAH,kBAAZjB,CAAAA,YAAY,6CAAlB,CA4BA,mBACI,MAAC,QAAD,yBACI,WAAI,SAAS,CAAC,kBAAd,mBADJ,cAEI,cAAM,QAAQ,CAAEA,YAAhB,wBACI,cACI,IAAI,CAAC,OADT,CAEI,IAAI,CAAC,OAFT,CAGI,WAAW,CAAC,OAHhB,CAII,SAAS,CAAC,mBAJd,CAKI,KAAK,CAAET,KALX,CAMI,QAAQ,CAAE,kBAAAK,CAAC,QAAGD,CAAAA,SAAQ,CAACC,CAAD,CAAX,EANf,EADJ,cASI,cACI,IAAI,CAAC,UADT,CAEI,IAAI,CAAC,UAFT,CAGI,WAAW,CAAC,UAHhB,CAII,SAAS,CAAC,mBAJd,CAKI,KAAK,CAAEJ,QALX,CAMI,QAAQ,CAAE,kBAAAI,CAAC,QAAGD,CAAAA,SAAQ,CAACC,CAAD,CAAX,EANf,EATJ,cAiBI,eAAQ,SAAS,CAAC,2BAAlB,oBAjBJ,GAFJ,cAqBI,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBArBJ,GADJ,CAyBH,CAjED,CAmEA,cAAeP,CAAAA,KAAf","sourcesContent":["import React, { Fragment, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst Login = ({ setAuth }) => {\n    const [inputs, setInputs] = useState({\n        email: '',\n        password: ''\n    });\n\n    const { email, password } = inputs;\n\n    const onChange = (e) => {\n        setInputs({ ...inputs, [e.target.name] : e.target.value });\n    };\n\n    const onSubmitForm = async (e) => {\n        e.preventDefault();\n\n        try {\n            const body = { email, password };\n            const response = await fetch('/auth/login', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(body)\n            });\n\n            const parseResponse = await response.json();\n            \n            if (parseResponse.token) {\n                localStorage.setItem('token', parseResponse.token);\n\n                setAuth(true);\n                toast.success('Logged In Successfully');\n            } else {\n                setAuth(false);\n                toast.error(parseResponse);\n            }\n            \n        } catch (err) {\n            console.error(err.message);\n        }\n    };\n\n    return (\n        <Fragment>\n            <h1 className='text-center my-5'>Login</h1>\n            <form onSubmit={onSubmitForm}>\n                <input\n                    type='email'\n                    name='email'\n                    placeholder='email'\n                    className='form-control my-3'\n                    value={email}\n                    onChange={e=> onChange(e)}\n                />\n                <input\n                    type='password'\n                    name='password'\n                    placeholder='password'\n                    className='form-control my-3'\n                    value={password}\n                    onChange={e=> onChange(e)}\n                />\n                <button className='btn btn-success btn-block'>Submit</button>\n            </form>\n            <Link to='/register'>Register</Link>\n        </Fragment>\n    );\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}
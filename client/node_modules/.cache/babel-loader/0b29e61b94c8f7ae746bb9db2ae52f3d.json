{"ast":null,"code":"import _objectSpread from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from'react';import'./App.css';import{BrowserRouter as Router,Switch,Route,Redirect}from'react-router-dom';import{ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';//components\nimport Dashboard from'./components/dashboard/Dashboard';import Login from'./components/Login';import Register from'./components/Register';import Landing from'./components/Landing';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuthenticated=_useState2[0],setIsAuthenticated=_useState2[1];var setAuth=function setAuth(boolean){setIsAuthenticated(boolean);};var isAuth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,parseResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/auth/is-verify',{method:'GET',headers:{token:localStorage.token}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:parseResponse=_context.sent;parseResponse===true?setIsAuthenticated(true):setIsAuthenticated(false);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function isAuth(){return _ref.apply(this,arguments);};}();useEffect(function(){isAuth();});return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",render:function render(props){return!isAuthenticated?/*#__PURE__*/_jsx(Landing,_objectSpread({},props)):/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/login\",render:function render(props){return!isAuthenticated?/*#__PURE__*/_jsx(Login,_objectSpread(_objectSpread({},props),{},{setAuth:setAuth})):/*#__PURE__*/_jsx(Redirect,{to:\"/dashboard\"});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",render:function render(props){return!isAuthenticated?/*#__PURE__*/_jsx(Register,_objectSpread(_objectSpread({},props),{},{setAuth:setAuth})):/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/dashboard\",render:function render(props){return isAuthenticated?/*#__PURE__*/_jsx(Dashboard,_objectSpread(_objectSpread({},props),{},{setAuth:setAuth})):/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});}})]})})}),/*#__PURE__*/_jsx(ToastContainer,{})]})});}export default App;","map":{"version":3,"sources":["/Users/trwarren/Projects/pern-jwt-todo/client/src/App.js"],"names":["React","Fragment","useState","useEffect","BrowserRouter","Router","Switch","Route","Redirect","ToastContainer","Dashboard","Login","Register","Landing","App","isAuthenticated","setIsAuthenticated","setAuth","boolean","isAuth","fetch","method","headers","token","localStorage","response","json","parseResponse","console","error","message","props"],"mappings":"4oBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,SAApC,KAAqD,OAArD,CACA,MAAO,WAAP,CACA,OACEC,aAAa,GAAIC,CAAAA,MADnB,CAEEC,MAFF,CAGEC,KAHF,CAIEC,QAJF,KAKO,kBALP,CAMA,OAASC,cAAT,KAA+B,gBAA/B,CACA,MAAO,uCAAP,CAEA;AACA,MAAOC,CAAAA,SAAP,KAAsB,kCAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAA8CZ,QAAQ,CAAC,KAAD,CAAtD,wCAAOa,eAAP,eAAwBC,kBAAxB,eAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,OAAD,CAAa,CAC3BF,kBAAkB,CAACE,OAAD,CAAlB,CACD,CAFD,CAIA,GAAMC,CAAAA,MAAM,0FAAG,oMAEYC,CAAAA,KAAK,CAAC,iBAAD,CAAoB,CAC9CC,MAAM,CAAE,KADsC,CAE9CC,OAAO,CAAE,CAAEC,KAAK,CAAEC,YAAY,CAACD,KAAtB,CAFqC,CAApB,CAFjB,QAELE,QAFK,qCAOiBA,CAAAA,QAAQ,CAACC,IAAT,EAPjB,QAOLC,aAPK,eASXA,aAAa,GAAK,IAAlB,CAAyBX,kBAAkB,CAAC,IAAD,CAA3C,CAAoDA,kBAAkB,CAAC,KAAD,CAAtE,CATW,iFAYXY,OAAO,CAACC,KAAR,CAAc,YAAIC,OAAlB,EAZW,qEAAH,kBAANX,CAAAA,MAAM,0CAAZ,CAeAhB,SAAS,CAAC,UAAM,CACdgB,MAAM,GACP,CAFQ,CAAT,CAIA,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,MAAC,QAAD,yBACE,KAAC,MAAD,wBACE,YAAK,SAAS,CAAC,WAAf,uBACE,MAAC,MAAD,yBACE,KAAC,KAAD,EACE,KAAK,KADP,CACQ,IAAI,CAAC,GADb,CAEE,MAAM,CAAE,gBAAAY,KAAK,QACb,CAAChB,eAAD,cACE,KAAC,OAAD,kBAAagB,KAAb,EADF,cAGE,KAAC,QAAD,EAAU,EAAE,CAAC,YAAb,EAJW,EAFf,EADF,cAUE,KAAC,KAAD,EACE,KAAK,KADP,CACQ,IAAI,CAAC,QADb,CAEE,MAAM,CAAE,gBAAAA,KAAK,QACb,CAAChB,eAAD,cACE,KAAC,KAAD,gCAAWgB,KAAX,MAAkB,OAAO,CAAGd,OAA5B,GADF,cAGE,KAAC,QAAD,EAAU,EAAE,CAAC,YAAb,EAJW,EAFf,EAVF,cAmBE,KAAC,KAAD,EACE,KAAK,KADP,CACQ,IAAI,CAAC,WADb,CAEE,MAAM,CAAE,gBAAAc,KAAK,QACX,CAAChB,eAAD,cACE,KAAC,QAAD,gCAAcgB,KAAd,MAAqB,OAAO,CAAGd,OAA/B,GADF,cAGE,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAJS,EAFf,EAnBF,cA4BE,KAAC,KAAD,EACE,KAAK,KADP,CACQ,IAAI,CAAC,YADb,CAEE,MAAM,CAAE,gBAAAc,KAAK,QACXhB,CAAAA,eAAe,cACb,KAAC,SAAD,gCAAegB,KAAf,MAAsB,OAAO,CAAGd,OAAhC,GADa,cAGb,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAJS,EAFf,EA5BF,GADF,EADF,EADF,cA2CE,KAAC,cAAD,IA3CF,GADF,EADF,CAiDD,CAED,cAAeH,CAAAA,GAAf","sourcesContent":["import React, { Fragment, useState, useEffect } from 'react';\nimport './App.css';\nimport { \n  BrowserRouter as Router, \n  Switch, \n  Route, \n  Redirect \n} from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n//components\nimport Dashboard from './components/dashboard/Dashboard';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport Landing from './components/Landing';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  const setAuth = (boolean) => {\n    setIsAuthenticated(boolean);\n  }\n\n  const isAuth = async () => {\n    try {\n      const response = await fetch('/auth/is-verify', {\n        method: 'GET',\n        headers: { token: localStorage.token }\n      });\n\n      const parseResponse = await response.json();\n\n      parseResponse === true ? setIsAuthenticated(true) : setIsAuthenticated(false);\n\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  useEffect(() => {\n    isAuth()\n  })\n\n  return (\n    <div className=\"App\">\n      <Fragment>\n        <Router>\n          <div className=\"container\">\n            <Switch>\n              <Route \n                exact path=\"/\" \n                render={props => \n                !isAuthenticated ? (\n                  <Landing {...props} />\n                ) : ( \n                  <Redirect to=\"/dashboard\" /> \n                )} \n              />\n              <Route \n                exact path=\"/login\" \n                render={props => \n                !isAuthenticated ? (\n                  <Login {...props} setAuth ={setAuth} />\n                ) : ( \n                  <Redirect to=\"/dashboard\" /> \n                )} \n              />\n              <Route \n                exact path=\"/register\" \n                render={props => \n                  !isAuthenticated ? (\n                    <Register {...props} setAuth ={setAuth} />\n                  ) : ( \n                    <Redirect to=\"/login\" /> \n                  )} \n                />\n              <Route \n                exact path=\"/dashboard\" \n                render={props => \n                  isAuthenticated ? (\n                    <Dashboard {...props} setAuth ={setAuth} />\n                  ) : ( \n                    <Redirect to=\"/login\" /> \n                  )} \n                />\n            </Switch>\n          </div>\n        </Router>\n        <ToastContainer />\n      </Fragment>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState}from\"react\";import EditTodo from\"./EditTodo\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListTodos=function ListTodos(_ref){var allTodos=_ref.allTodos,setTodosChange=_ref.setTodosChange;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];//delete todo function\nvar deleteTodo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/dashboard/todos/\".concat(id),{method:\"DELETE\",headers:{token:localStorage.token}});case 3:setTodos(todos.filter(function(todo){return todo.todo_id!==id;}));_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function deleteTodo(_x){return _ref2.apply(this,arguments);};}();//prevent page from refreshing\nuseEffect(function(){setTodos(allTodos);},[allTodos]);console.log(todos);return/*#__PURE__*/_jsxs(Fragment,{children:[\" \",/*#__PURE__*/_jsxs(\"table\",{className:\"table mt-5 text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:todos.length!==0&&todos[0].todo_id!==null&&todos.map(function(todo){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:todo.description}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(EditTodo,{todo:todo,setTodosChange:setTodosChange})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteTodo(todo.todo_id);},children:\"Delete\"})})]},todo.todo_id);})})]})]});};export default ListTodos;","map":{"version":3,"sources":["/Users/trwarren/Projects/pern-jwt-todo/client/src/components/dashboard/todolist/ListTodo.js"],"names":["React","Fragment","useEffect","useState","EditTodo","ListTodos","allTodos","setTodosChange","todos","setTodos","deleteTodo","id","fetch","method","headers","token","localStorage","filter","todo","todo_id","console","error","message","log","length","map","description"],"mappings":"yeAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,QAArC,KAAqD,OAArD,CAEA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAkC,IAA/BC,CAAAA,QAA+B,MAA/BA,QAA+B,CAArBC,cAAqB,MAArBA,cAAqB,CAClD,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eAEA;AACA,GAAMC,CAAAA,UAAU,2FAAG,iBAAMC,EAAN,wJAETC,CAAAA,KAAK,4BAAqBD,EAArB,EAA2B,CACpCE,MAAM,CAAE,QAD4B,CAEpCC,OAAO,CAAE,CAACC,KAAK,CAAEC,YAAY,CAACD,KAArB,CAF2B,CAA3B,CAFI,QAOfN,QAAQ,CAACD,KAAK,CAACS,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,OAAL,GAAiBR,EAArB,EAAjB,CAAD,CAAR,CAPe,8EASfS,OAAO,CAACC,KAAR,CAAc,YAAIC,OAAlB,EATe,mEAAH,kBAAVZ,CAAAA,UAAU,6CAAhB,CAaA;AACAR,SAAS,CAAC,UAAM,CACdO,QAAQ,CAACH,QAAD,CAAR,CACD,CAFQ,CAEN,CAACA,QAAD,CAFM,CAAT,CAIAc,OAAO,CAACG,GAAR,CAAYf,KAAZ,EAEA,mBACE,MAAC,QAAD,YACG,GADH,cAEE,eAAO,SAAS,CAAC,wBAAjB,wBACE,oCACE,mCACE,mCADF,cAEE,4BAFF,cAGE,8BAHF,GADF,EADF,cAQE,uBAMGA,KAAK,CAACgB,MAAN,GAAiB,CAAjB,EAAsBhB,KAAK,CAAC,CAAD,CAAL,CAASW,OAAT,GAAqB,IAA3C,EAAmDX,KAAK,CAACiB,GAAN,CAAU,SAAAP,IAAI,qBAChE,mCACE,oBAAKA,IAAI,CAACQ,WAAV,EADF,cAEE,iCACE,KAAC,QAAD,EAAU,IAAI,CAAER,IAAhB,CAAsB,cAAc,CAAEX,cAAtC,EADF,EAFF,cAKE,iCACE,eACE,SAAS,CAAC,gBADZ,CAEE,OAAO,CAAE,yBAAMG,CAAAA,UAAU,CAACQ,IAAI,CAACC,OAAN,CAAhB,EAFX,oBADF,EALF,GAASD,IAAI,CAACC,OAAd,CADgE,EAAd,CANtD,EARF,GAFF,GADF,CAqCD,CA7DD,CA+DA,cAAed,CAAAA,SAAf","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\n\nimport EditTodo from \"./EditTodo\";\n\nconst ListTodos = ({ allTodos, setTodosChange }) => {\n  const [todos, setTodos] = useState([]);\n\n  //delete todo function\n  const deleteTodo = async id => {\n    try {\n      await fetch(`/dashboard/todos/${id}`, {\n        method: \"DELETE\",\n        headers: {token: localStorage.token}\n      });\n\n      setTodos(todos.filter(todo => todo.todo_id !== id));\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n  //prevent page from refreshing\n  useEffect(() => {\n    setTodos(allTodos);\n  }, [allTodos]);\n\n  console.log(todos);\n\n  return (\n    <Fragment>\n      {\" \"}\n      <table className=\"table mt-5 text-center\">\n        <thead>\n          <tr>\n            <th>Description</th>\n            <th>Edit</th>\n            <th>Delete</th>\n          </tr>\n        </thead>\n        <tbody>\n          {/*<tr>\n            <td>John</td>\n            <td>Doe</td>\n            <td>john@example.com</td>\n          </tr> */}\n          {todos.length !== 0 && todos[0].todo_id !== null && todos.map(todo => (\n            <tr key={todo.todo_id}>\n              <td>{todo.description}</td>\n              <td>\n                <EditTodo todo={todo} setTodosChange={setTodosChange}/>\n              </td>\n              <td>\n                <button\n                  className=\"btn btn-danger\"\n                  onClick={() => deleteTodo(todo.todo_id)}\n                >\n                  Delete\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </Fragment>\n  );\n};\n\nexport default ListTodos;"]},"metadata":{},"sourceType":"module"}
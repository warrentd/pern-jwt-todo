{"ast":null,"code":"import _regeneratorRuntime from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/trwarren/Projects/pern-jwt-todo/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState}from'react';import{Link}from'react-router-dom';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(_ref){var setAuth=_ref.setAuth;var _useState=useState({email:'',password:'',name:''}),_useState2=_slicedToArray(_useState,2),inputs=_useState2[0],setInputs=_useState2[1];var email=inputs.email,password=inputs.password,name=inputs.name;var _onChange=function onChange(e){setInputs(_objectSpread(_objectSpread({},inputs),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmitForm=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var body,response,parseResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;body={email:email,password:password,name:name};_context.next=5;return fetch('/auth/register',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)});case 5:response=_context.sent;_context.next=8;return response.json();case 8:parseResponse=_context.sent;if(parseResponse.token){localStorage.setItem(\"token\",parseResponse.token);setAuth(true);toast.success('Registered Successfully');}else{setAuth(false);toast.error(parseResponse);}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return function onSubmitForm(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center my-5\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitForm,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"email\",className:\"form-control my-3\",value:email,onChange:function onChange(e){return _onChange(e);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"password\",className:\"form-control my-3\",value:password,onChange:function onChange(e){return _onChange(e);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"name\",className:\"form-control my-3\",value:name,onChange:function onChange(e){return _onChange(e);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-block\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]});};export default Register;","map":{"version":3,"sources":["/Users/trwarren/Projects/pern-jwt-todo/client/src/components/Register.js"],"names":["React","Fragment","useState","Link","toast","Register","setAuth","email","password","name","inputs","setInputs","onChange","e","target","value","onSubmitForm","preventDefault","body","fetch","method","headers","JSON","stringify","response","json","parseResponse","token","localStorage","setItem","success","error","console","message"],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst Register = ({ setAuth }) => {\n    const [inputs, setInputs] = useState({\n        email: '',\n        password: '',\n        name: ''\n    })\n\n    const {email, password, name} = inputs;\n\n    const onChange = (e) => {\n        setInputs({...inputs, [e.target.name] : e.target.value});\n    };\n\n    const onSubmitForm = async (e) => {\n        e.preventDefault();\n\n        try {\n            const body = {email, password, name}\n            const response = await fetch('/auth/register', {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify(body)\n            });\n\n            const parseResponse = await response.json();\n\n            if (parseResponse.token) {\n                localStorage.setItem(\"token\", parseResponse.token);\n\n                setAuth(true);\n                toast.success('Registered Successfully');\n            } else {\n                setAuth(false);\n                toast.error(parseResponse);\n            }\n            \n        } catch (err) {\n            console.error(err.message);\n        }\n    }\n\n    return (\n    <Fragment>\n        <h1 className='text-center my-5'>Register</h1>\n        <form onSubmit={onSubmitForm}>\n            <input \n                type='email' \n                name='email' \n                placeholder='email'\n                className='form-control my-3' \n                value={email}\n                onChange= {e => onChange(e)}\n            />\n            <input \n                type='password' \n                name='password' \n                placeholder='password'\n                className='form-control my-3'\n                value={password}\n                onChange= {e => onChange(e)}  \n            />\n            <input \n                type='text' \n                name='name' \n                placeholder='name'\n                className='form-control my-3'\n                value={name}\n                onChange= {e => onChange(e)}  \n            />\n            <button className='btn btn-success btn-block'>Submit</button>\n        </form>\n        <Link to='/login'>Login</Link>\n    </Fragment>\n    );\n};\n\nexport default Register;"]},"metadata":{},"sourceType":"module"}